<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>SystemResource - SLAMWARE C++ SDK</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "SystemResource";
    var mkdocs_page_input_path = "system_resource.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/json.min.js"></script>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/cpp.min.js"></script>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/bash.min.js"></script>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/makefile.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../index.html" class="icon icon-home"> SLAMWARE C++ SDK</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="http://developer.slamtec.com/docs/slamware/cpp-sdk-en/2.6.0_rtm/search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../index.html">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../location/index.html">Location</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../rotation/index.html">Rotation</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../pose/index.html">Pose</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../action/index.html">Action</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../action_status/index.html">ActionStatus</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../feature/index.html">Feature</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../rectangleF/index.html">RectangleF</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../vector2f/index.html">Vector2f</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../vector2i/index.html">Vector2i</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../laserPoint/index.html">LaserPoint</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../RobotPlatform/index.html">RobotPlatform</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../MoveAction/index.html">MoveAction</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="http://developer.slamtec.com/docs/slamware/cpp-sdk-en/2.6.0_rtm/VelocityControlMoveAction.md">VelocityControlMoveAction</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../MoveOptionFlag/index.html">MoveOptionFlag</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../MoveOptions/index.html">MoveOptions</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../artifact_provider/index.html">ArtifactProvider</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../location_provider/index.html">LocationProvider</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../motion_planner/index.html">MotionPlanner</a>
	    </li>
          
            <li class="toctree-l1 current">
		
    <a class="current" href="index.html">SystemResource</a>
    <ul class="subnav">
            
    <li class="toctree-l2"><a href="index.html#rposfeaturessystemresource-class">rpos::features::SystemResource Class</a></li>
    
        <ul>
        
            <li><a class="toctree-l3" href="index.html#header-file">Header File</a></li>
        
            <li><a class="toctree-l3" href="index.html#applies-to">Applies to</a></li>
        
            <li><a class="toctree-l3" href="index.html#base-class">Base Class</a></li>
        
            <li><a class="toctree-l3" href="index.html#constructors">Constructors</a></li>
        
            <li><a class="toctree-l3" href="index.html#methods">Methods</a></li>
        
        </ul>
    

    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../map/index.html">Map</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../map_type/index.html">MapTyoe</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../bitmap_map/index.html">BitmapMap</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../bitmap_map_pixel_format/index.html">BitmapMapPixelFormat</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../path/index.html">Path</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../laser_scan/index.html">LaserScan</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../slamware_core_platform/index.html">SlamwareCorePlatform</a>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">SLAMWARE C++ SDK</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
    
      
    
    <li>SystemResource</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h2 id="rposfeaturessystemresource-class">rpos::features::SystemResource Class</h2>
<p>System resource related feature, which provides raw LIDAR scan, power management, chasis status information and etc. access functions.</p>
<h3 id="header-file">Header File</h3>
<p>rpos/features/system_resource/feature.h</p>
<h3 id="applies-to">Applies to</h3>
<ul>
<li>Slamware</li>
<li>Mapper</li>
</ul>
<h3 id="base-class">Base Class</h3>
<p>Derived from <code>rpos::core::Feature</code></p>
<h3 id="constructors">Constructors</h3>
<pre><code class="cpp">SystemResource(boost::shared_ptr&lt;detail::SystemResourceImpl&gt;)  
</code></pre>

<p>Used only by SDK itself</p>
<pre><code class="cpp">SystemResource()  
</code></pre>

<p>Default contructor</p>
<h3 id="methods">Methods</h3>
<pre><code class="cpp">int getBatteryPercentage()
</code></pre>

<p>Get remaining battery in percentage. (56 for 56%)</p>
<pre><code class="cpp">bool getBatteryIsCharging()  
</code></pre>

<p>Get if the battery is charging</p>
<pre><code class="cpp">bool getDCIsConnected()  
</code></pre>

<p>Get if the power outlet is connected to the robot</p>
<pre><code class="cpp">system_resource::PowerStatus  getPowerStatus()   
</code></pre>

<p>Get composed power status. For details please refer to <a href="../power_status/index.html">rpos::features::system_resource::PowerStatus</a></p>
<pre><code class="cpp">void wakeUp()   
</code></pre>

<p>Wake up the robot from hibernation.</p>
<pre><code class="cpp">int getBoardTemperature()  
</code></pre>

<p>Get the temperature of the mother board, unit: 0.1℃.</p>
<pre><code class="cpp">std::string getSDPVersion()  
</code></pre>

<p>Get the software version of SLAMWARE system.</p>
<pre><code class="cpp">rpos::features::system_resource::LaserScan getLaserScan()  
</code></pre>

<p>Get raw scan data. For details, please refer to <a href="../laser_scan/index.html">rpos::features::system_resource::LaserScan</a></p>
<pre><code class="cpp">bool restartModule(system_resource::RestartMode mode = system_resource::RestartModeSoft)  
</code></pre>

<p>Restart the SLAMWARE system in specified mode</p>
<p>Restart Modes</p>
<table>
<thead>
<tr>
<th>Value</th>
<th>Comments</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>RestartModeSoft</code></td>
<td>Soft restart. Restart services only</td>
</tr>
<tr>
<td><code>RestartModeHard</code></td>
<td>Hard restart. Reboot the whole system</td>
</tr>
</tbody>
</table>
<pre><code class="cpp">bool setSystemParameter(const std::string&amp; param, const std::string&amp; value)  
</code></pre>

<p>Adjust system parameter on the fly.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Data type</th>
<th>Comments</th>
</tr>
</thead>
<tbody>
<tr>
<td>param</td>
<td>const std::string&amp;</td>
<td>The key to the system parameter, see following table for details</td>
</tr>
<tr>
<td>value</td>
<td>const std::string&amp;</td>
<td>The new value to this parameter</td>
</tr>
</tbody>
</table>
<p>System Parameters</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Comments</th>
<th>Available Values</th>
</tr>
</thead>
<tbody>
<tr>
<td>base.max_moving_speed</td>
<td>Max linear speed for robot</td>
<td>float literal or one of three:"high","medium","low"</td>
</tr>
<tr>
<td>motionplan.low_localization_quality_threshold</td>
<td>Thershold to stop robot movement under low localization quality</td>
<td>Integer between 0 to 100</td>
</tr>
<tr>
<td>base.power_off_wait_time</td>
<td>Time to wait when power off is requested</td>
<td>Integer, in seconds</td>
</tr>
</tbody>
</table>
<p>Example</p>
<pre><code>bool bRet = platform.setSystemParameter(SYSPARAM_ROBOT_SPEED, SYSVAL_ROBOT_SPEED_HIGH);
</code></pre>

<pre><code class="cpp">std::string getSystemParameter(const std::string&amp; param)  
</code></pre>

<p>Get current value of system parameter. Please refer to <code>setSystemParameter</code> for available values to <code>param</code>.</p>
<pre><code class="cpp">bool updateBinaryConfig(const Json::Value&amp; jsnCfg)  
</code></pre>

<p>Upload binary config</p>
<pre><code class="cpp">bool shutdownSlamcore(const rpos::core::SlamcoreShutdownParam&amp; shutdownArg)  
</code></pre>

<p>Shutdown SLAMWARE system</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Data type</th>
<th>Comments</th>
</tr>
</thead>
<tbody>
<tr>
<td>shutdownArg</td>
<td>const rpos::core::SlamcoreShutdownParam&amp;</td>
<td>Fields of this struct: <code>restartTimeIntervalMinute</code> for time interval to restart; <code>shutdownTimeIntervalMinute</code> for time interval to shutdown; please notice, restart time should be greater than shutdown time, or an <code>OperationFailException</code> will be thrown.</td>
</tr>
</tbody>
</table>
<pre><code class="cpp">system_resource::DeviceInfo getDeviceInfo()  
</code></pre>

<p>Get device info, for details please refer to <a href="../device_info/index.html">rpos::features::system_resource::DeviceInfo</a></p>
<pre><code class="cpp">rpos::features::system_resource::BaseHealthInfo getRobotHealth()  
</code></pre>

<p>Get robot health infomation, for details please refer to <a href="../base_healthinfo/index.html">rpos::features::system_resource::BaseHealthInfo</a></p>
<pre><code class="cpp">void clearRobotHealth(int errorCode)  
</code></pre>

<p>Clear specific health error code.</p>
<pre><code class="cpp">bool configurateNetwork(
    rpos::features::system_resource::NetworkMode mode,
    const std::map&lt;std::string, std::string&gt;&amp; options
)  
</code></pre>

<p>Configure robot network mode</p>
<p>Parameters</p>
<table>
<thead>
<tr>
<th>Network Modes</th>
<th>ssid</th>
<th>password</th>
<th>channel</th>
<th>ip</th>
<th>dns</th>
<th>gateway</th>
<th>mask</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>NetworkModeAp</code></td>
<td>Optional</td>
<td>Optional</td>
<td>Optional</td>
<td>Optional</td>
<td>Optional</td>
<td>Optional</td>
<td>Optional</td>
</tr>
<tr>
<td><code>NetworkModeStation</code></td>
<td>Required</td>
<td>Optional</td>
<td>--</td>
<td>--</td>
<td>--</td>
<td>--</td>
<td>--</td>
</tr>
<tr>
<td><code>NetworkModeWifiDisabled</code></td>
<td>--</td>
<td>--</td>
<td>--</td>
<td>--</td>
<td>--</td>
<td>--</td>
<td>--</td>
</tr>
<tr>
<td><code>NetworkModeDHCPDisabled</code></td>
<td>--</td>
<td>--</td>
<td>--</td>
<td>--</td>
<td>--</td>
<td>--</td>
<td>--</td>
</tr>
<tr>
<td><code>NetworkModeDHCPEnabled</code></td>
<td>--</td>
<td>--</td>
<td>--</td>
<td>--</td>
<td>--</td>
<td>--</td>
<td>--</td>
</tr>
</tbody>
</table>
<ol>
<li>Only listed modes are supported yet, <code>ssid</code>, <code>password</code>, <code>channel</code>, and other fields may be optional or required according to selected network mode (-- for N/A)</li>
<li><code>NetworkModeWifiDisabled</code> will disable the WiFi function</li>
</ol>
<p>Example</p>
<pre><code>std::map&lt;std::string, std::string&gt; options;
options[“ssid”] = “Slamtec”;
options[“password”] = “slamtect”;
Bool bRet = platform.configureNetwork(rpos::features::system_resource::NetworkModeStation,options);
</code></pre>

<pre><code class="cpp">std::map&lt;std::string, std::string&gt; getNetworkStatus()  
</code></pre>

<p>Get current wireless configuration</p>
<p>Notes: currently only <code>mode</code>, <code>ssid</code>, and <code>ip</code> are returned</p>
<pre><code class="cpp">system_resource::HeartBeatToken startHeartBeat(int heartBeatTimeoutInSeconds)  
</code></pre>

<p>Start heart beat. After first start, the client app should invoke <code>refreshHeartBeat</code> method periodically to tell it's working properly. If SLAMWARE doesn't receive the token in preset timeout, it will judge client application's malfunctioning and abort current action.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Data type</th>
<th>Comments</th>
</tr>
</thead>
<tbody>
<tr>
<td>heartBeatTimeoutInSeconds</td>
<td>int</td>
<td>Heartbeat timeout in seconds</td>
</tr>
</tbody>
</table>
<pre><code class="cpp">void refreshHeartBeat(system_resource::HeartBeatToken token)  
</code></pre>

<p>Refresh heart beat. Only one or no token is active. If <code>startHeartBeat</code> is invoked twice, the first token will be invalidated, and only later timeout and token are valid.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Date type</th>
<th>Comments</th>
</tr>
</thead>
<tbody>
<tr>
<td>token</td>
<td>system_resource::HeartBeatToken</td>
<td>Token returned by <code>startHeartBeat(int)</code></td>
</tr>
</tbody>
</table>
<pre><code class="cpp">void stopHeartBeat(system_resource::HeartBeatToken token)    
</code></pre>

<p>Stop heart beat function.</p>
<pre><code class="cpp">void voiceRespond()  
</code></pre>

<p>Voice respond to indicate robot's position. (unsupported yet)</p>
<pre><code class="cpp">void startFirmwareUpgrade(const std::string&amp; filename)  
</code></pre>

<p>Start firmware upgrade with specific firmware file.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Date type</th>
<th>Comments</th>
</tr>
</thead>
<tbody>
<tr>
<td>filename</td>
<td>const std::string&amp;</td>
<td>The path to the firmware file</td>
</tr>
</tbody>
</table>
<pre><code class="cpp">void startFirmwareUpgrade(const std::vector&lt;uint8_t&gt;&amp; firmwareContent)  
</code></pre>

<p>Start firmware upgrade with firmware binary</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Date type</th>
<th>Comments</th>
</tr>
</thead>
<tbody>
<tr>
<td>firmwareContent</td>
<td>const std::vector<uint8_t>&amp;</td>
<td>The binary content of the firmware file</td>
</tr>
</tbody>
</table>
<pre><code class="cpp">void publishDepthCamFrame(
    int sensorId,
    const rpos::message::depth_camera::DepthCameraFrame&amp; frame
)
</code></pre>

<p>Send depth camera frame to the SLAMWARE system</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Date type</th>
<th>Comments</th>
</tr>
</thead>
<tbody>
<tr>
<td>sensorId</td>
<td>int</td>
<td>Sensor ID, should be the same with configuration</td>
</tr>
<tr>
<td>frame</td>
<td>const rpos::message::depth_camera::DepthCameraFrame&amp;</td>
<td>Depth camera frame</td>
</tr>
</tbody>
</table>
<pre><code class="cpp">std::vector&lt;system_resource::OperationAuditLog&gt; getOperationAuditLogs()  
</code></pre>

<p>Get operation audit log from SLAMWARE system</p>
<pre><code class="cpp">int sendAndRecvUserDefinedCBUSMessage(
    const void * payload,
    const size_t payloadsize,
    void * recvBuffer,
    size_t &amp; recvDataSize
)
</code></pre>

<p>Send customized control bus command to the chasis and receives response</p>
<pre><code class="cpp">system_resource::LidarAutoTweakRequestResult beginLidarAutoTweak()  
</code></pre>

<p>Begin LIDAR auto tweaking process</p>
<p>Return values</p>
<table>
<thead>
<tr>
<th>Return value</th>
<th>Comment</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>LidarAutoTweakRequestResultStarted</code></td>
<td>LIDAR auto tweaking started</td>
</tr>
<tr>
<td><code>LidarAutoTweakRequestResultNotSupport</code></td>
<td>The robot doesn't support this feature</td>
</tr>
<tr>
<td><code>LidarAutoTweakRequestResultDisabled</code></td>
<td>This feature is disabled in the configuration</td>
</tr>
</tbody>
</table>
<pre><code class="cpp">system_resource::LidarAutoTweakStatus getLidarAutoTweakStatus()
</code></pre>

<p>Fetch LIDAR auto tweaking status</p>
<p>Return values</p>
<table>
<thead>
<tr>
<th>Return value</th>
<th>Comments</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>LidarAutoTweakStatusIdle</code></td>
<td>Idle, the tweaking process is not triggered</td>
</tr>
<tr>
<td><code>LidarAutoTweakStatusWaitingForContext</code></td>
<td>The tweaking process is triggered, but still collecting more data</td>
</tr>
<tr>
<td><code>LidarAutoTweakStatusTweaking</code></td>
<td>All required data is ready, tweaking LIDAR</td>
</tr>
<tr>
<td><code>LidarAutoTweakStatusDone</code></td>
<td>LIDAR is tweaked, wait for accept or reject</td>
</tr>
<tr>
<td><code>LidarAutoTweakStatusFailed</code></td>
<td>Cannot find out a proper parameter for this tweaking</td>
</tr>
</tbody>
</table>
<pre><code class="cpp">bool acceptLidarTweakResult()  
</code></pre>

<p>Accept LIDAR auto tweaking result, and save to LIDAR</p>
<pre><code class="cpp">void resetLidarTweakResult()  
</code></pre>

<p>Reject LIDAR auto tweaking result, and revert to original settings</p>
<pre><code class="cpp">void cancelLidarAutoTweak()  
</code></pre>

<p>Cancel current auto tweaking process</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../map/index.html" class="btn btn-neutral float-right" title="Map">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../motion_planner/index.html" class="btn btn-neutral" title="MotionPlanner"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../motion_planner/index.html" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../map/index.html" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>

</body>
</html>
